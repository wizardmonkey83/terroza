<div id="replacement-frame" class="challenge-card entry-view-card">
    <div class="header">Make an Entry for: {{ user_book.book.title }}</div>

    <form hx-post="{% url 'save_entry' %}" hx-target="#replacement-frame" hx-swap="outerHTML" class="entry-form-right">
        {% csrf_token %}
        <input type="hidden" name="user_book_id" value="{{ user_book.id }}"/>
        
        <textarea id="entry-textarea" name="entry" placeholder="Min length: 350, Max length: 750"></textarea>
        <div id="char-counter" style="text-align: right; opacity: 0.7; font-size: 0.9rem; margin-bottom: 1rem;">0 characters</div>
        <button type="submit" class="submit-btn">Save</button>
    </form>

</div>

<script>
    const textarea = document.getElementById('entry-textarea');
    const counter = document.getElementById('char-counter');

    if (textarea && counter) {
        textarea.addEventListener('input', () => {
            const count = textarea.value.length;
            counter.textContent = `${count} characters`;
        });
    }
</script>